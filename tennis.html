<canvas id="tennis" width="800px" height="600px"></canvas>

<script>
    let canvas = document.getElementById('tennis');
    let context = canvas.getContext('2d');
    let paddle1Y = 250;
    let PADDLE_HEIGHT = 200;
    let ballX = canvas.width/2;
    let ballY = canvas.height/2;
    let ballSpeedX = 10;
    let ballSpeedY = 4;
    
    window.onload = function(){
        let frameRate = 30;

        canvas.addEventListener('mousemove', 
        (e)=> {
            let mousePos = calculateMousePos(e);
            paddle1Y = mousePos.y-(PADDLE_HEIGHT/2)
            console.log(paddle1Y)
        })

        setInterval(function(){
            moveThings();
            // draw the main canvas
            drawRectangles(0,0,canvas.width,canvas.height, 'black');

            //draw the first paddle
            drawRectangles(10,paddle1Y,10,PADDLE_HEIGHT, 'lime');

            //draw the second paddle
            drawRectangles(780,250, 10, PADDLE_HEIGHT, 'lime');

            drawBall('red', ballX, ballY, 10);
        }, 1000/frameRate)
    }
    
    const moveThings = () => {
        ballX = ballX + ballSpeedX;
        ballY = ballY + ballSpeedY;
        if (ballX > canvas.width-20) {
            ballSpeedX = -ballSpeedX
        }
        if (ballX <0) {
            // 
            ballReset();
        }
        if (ballY > canvas.height-20){
            ballSpeedY = -ballSpeedY
        }
        if (ballY < 0){
            ballSpeedY = -ballSpeedY
        }
    }

    const drawRectangles = (x, y, width, height, color) => {
        context.fillStyle = color;
        context.fillRect(x, y, width, height)
    }

    const drawBall = (color, x,y, radius) => {
        context.fillStyle = color;
        context.beginPath();
        context.arc(x,y,radius,0,Math.PI*2,false);
        context.fill();
    }

    const calculateMousePos = (e) => {
        let rect = canvas.getBoundingClientRect();
        let root = document.documentElement;
        let mouseX = e.clientX - rect.left - root.scrollLeft;
        let mouseY = e.clientY - rect.top - root.scrollTop;
        return {
            x:mouseX,
            y:mouseY
        }
    }

    const ballReset = () => {
        ballSpeedX = -ballSpeedX
        ballX = canvas.width/2;
        ballY = canvas.height/2;
    }
</script>